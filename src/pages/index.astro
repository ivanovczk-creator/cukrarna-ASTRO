---
import Layout from '../layouts/Layout.astro';

// Cesty k datům jsou již ověřené
import productsData from '../../data.json';
import b2bData from '../../b2b.json';

const dortyRaw = productsData.dorty || [];
const zakuskyRaw = productsData.zakusky || [];

const sortedCakes = [...dortyRaw].sort((a, b) => (a.weight || 100) - (b.weight || 100));
const sortedDesserts = [...zakuskyRaw].sort((a, b) => (a.weight || 100) - (b.weight || 100));
const b2b = b2bData;

const stores = [
	{
		name: 'Píšť',
		address: 'Hlavní 123, 739 51 Píšť',
		mapsUrl: 'https://maps.google.com',
		closedDays: ['Sobota', 'Neděle'],
	},
	{
		name: 'Karviná',
		address: 'Náměstí 456, 733 01 Karviná',
		mapsUrl: 'https://maps.google.com',
		closedDays: ['Neděle'],
	},
	{
		name: 'Ostrava',
		address: 'Hlavní třída 789, 702 00 Ostrava',
		mapsUrl: 'https://maps.google.com',
		closedDays: ['Neděle'],
	},
	{
		name: 'Petřvald',
		address: 'Nádražní 321, 735 41 Petřvald',
		mapsUrl: 'https://maps.google.com',
		closedDays: ['Pondělí'],
	}
];
---

<Layout>
	<div class="min-h-screen">
		<header class="bg-[#0a192f] shadow-md sticky top-0 z-50 py-4">
			<nav class="container mx-auto px-4 flex items-center justify-between">
				<h1 class="text-3xl font-bold text-[#d4af37]">Cukrářství Blahutovi</h1>
				<div class="hidden md:flex gap-6 items-center">
					<a href="#dorty" class="text-white hover:text-[#d4af37]">Dorty</a>
					<a href="#zakusky" class="text-white hover:text-[#d4af37]">Zákusky</a>
					<a href="#prodejny" class="text-white hover:text-[#d4af37]">Prodejny</a>
					<a href="#b2b" class="text-white hover:text-[#d4af37]">B2B</a>
					<a href="#rezervace" class="bg-[#d4af37] text-[#0a192f] px-6 py-2 rounded-full font-semibold">Rezervace</a>
				</div>
			</nav>
		</header>

		<section class="bg-[#112240] text-white py-32 px-4 text-center">
			<div class="container mx-auto">
				<h2 class="text-5xl font-bold mb-6">Vítejte v Cukrářství Blahutovi</h2>
				<p class="text-xl mb-8 max-w-2xl mx-auto opacity-80">Rodinné cukrářství s tradicí od roku 1985. Nabízíme čerstvé dorty a zákusky připravené s láskou.</p>
				<a href="#dorty" class="bg-[#d4af37] text-[#0a192f] px-8 py-3 rounded-full font-bold shadow-lg">Prohlédnout nabídku</a>
			</div>
		</section>

		<section id="dorty" class="py-20 px-4 bg-white">
			<div class="container mx-auto">
				<h2 class="text-4xl font-bold text-center mb-12 text-gray-800">Naše dorty</h2>
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
					{sortedCakes.map((product) => (
						<div class="bg-white rounded-2xl shadow-lg overflow-hidden border border-[#d4af37]/20">
							<div class="aspect-square">
								<img src={product.image} alt={product.title} class="w-full h-full object-cover" />
							</div>
							<div class="p-6">
								<h3 class="text-xl font-bold mb-2 text-[#0a192f]">{product.title}</h3>
								<p class="text-[#d4af37] font-bold mb-4">{product.price}</p>
								<a href="#rezervace" class="block text-center bg-[#d4af37] text-[#0a192f] py-2 rounded-lg font-bold">Objednat</a>
							</div>
						</div>
					))}
				</div>
			</div>
		</section>

		<section id="prodejny" class="py-20 px-4 bg-[#f8f9fa]">
			<div class="container mx-auto">
				<h2 class="text-4xl font-bold text-center mb-12">Naše prodejny</h2>
				<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8">
					{stores.map((store) => (
						<div class="bg-white rounded-2xl p-6 shadow-md border border-[#d4af37]/20">
							<h3 class="text-2xl font-bold mb-3 text-[#d4af37]">{store.name}</h3>
							<p class="text-gray-700 mb-4">{store.address}</p>
							<p class="text-sm text-gray-500 mb-4">Zavřeno: {store.closedDays.join(', ')}</p>
							<a href={store.mapsUrl} target="_blank" class="block text-center bg-[#0a192f] text-white py-2 rounded-lg">Zobrazit mapu</a>
						</div>
					))}
				</div>
			</div>
		</section>

		<section id="rezervace" class="py-20 px-4 bg-white">
			<div class="container mx-auto max-w-2xl">
				<h2 class="text-4xl font-bold text-center mb-12">Rezervace</h2>
				<form class="space-y-4 bg-[#f8f9fa] p-8 rounded-2xl shadow-xl border border-[#d4af37]/20">
					<div>
						<label class="block mb-2 font-bold">Jméno a příjmení</label>
						<input type="text" class="w-full p-3 rounded-lg border border-gray-300" placeholder="Vaše jméno" />
					</div>
					<div>
						<label class="block mb-2 font-bold">Telefon</label>
						<input type="tel" class="w-full p-3 rounded-lg border border-gray-300" placeholder="+420 ..." />
					</div>
					<div>
						<label class="block mb-2 font-bold">O jaký produkt máte zájem?</label>
						<input type="text" class
