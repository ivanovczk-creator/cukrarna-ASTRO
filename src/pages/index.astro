---
import Layout from '../layouts/Layout.astro';
import productsData from '../../data.json';
import CustomCakeForm from '../components/CustomCakeForm';
import { Branch } from '../types';

// Seřazení produktů podle váhy (pokud je definována)
const cakes = (productsData?.cakes || []).sort((a, b) => (a.weight ?? 999) - (b.weight ?? 999));
const desserts = (productsData?.desserts || []).sort((a, b) => (a.weight ?? 999) - (b.weight ?? 999));

const stores = [
	{ id: 'petrvald', name: 'Petřvald', address: 'Šenovská 1', phone: '+420 778 157 857', mapUrl: 'https://maps.app.goo.gl/9Z6wN', hours: 'Út-Ne: 9:00 - 17:00' },
	{ id: 'pist', name: 'Píšť', address: 'Opavská 218/101', phone: '+420 602 323 788', mapUrl: 'https://maps.app.goo.gl/X7fR1', hours: 'Po-Pá: 6:00 - 15:00' },
	{ id: 'karvina', name: 'Karviná', address: 'tř. Těreškovové 2233/28', phone: '+420 778 157 867', mapUrl: 'https://maps.app.goo.gl/K8wS2', hours: 'Po-Pá: 9:00 - 17:00, So: 8:00 - 12:00' },
	{ id: 'ostrava', name: 'Ostrava (Zábřeh)', address: 'Výškovická 116a', phone: '+420 775 271 101', mapUrl: 'https://maps.app.goo.gl/O9wL3', hours: 'Po-Pá: 9:00 - 17:00, So: 9:00 - 12:00' }
];
---

<Layout title="Cukrářství Blahutovi">
	<header class="bg-[#0a192f] text-white sticky top-0 z-50 border-b-2 border-[#d4af37]">
		<div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">
			<h1 class="text-2xl font-serif text-[#d4af37]">Cukrářství Blahutovi</h1>
			<nav class="hidden md:flex gap-8 uppercase text-sm font-bold tracking-widest">
				<a href="#dorty" class="hover:text-[#d4af37] transition-colors">Dorty</a>
				<a href="#zakusky" class="hover:text-[#d4af37] transition-colors">Zákusky</a>
				<a href="#dort-na-prani" class="hover:text-[#d4af37] transition-colors">Dort na přání</a>
				<a href="#prodejny" class="hover:text-[#d4af37] transition-colors">Prodejny</a>
			</nav>
		</div>
	</header>

	<main>
		<section id="dorty" class="py-16 px-4 max-w-7xl mx-auto">
			<h2 class="text-4xl font-serif text-center mb-12 italic">Naše Dorty</h2>
			<div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-8">
				{cakes.map(cake => (
					<div class="bg-white rounded-3xl shadow-lg border border-slate-100 overflow-hidden group hover:shadow-2xl transition-all duration-300">
						<div class="h-72 overflow-hidden">
							<img src={cake.foto} alt={cake.title} class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-700" loading="lazy" />
						</div>
						<div class="p-6 text-center">
							<h3 class="text-xl font-bold mb-2">{cake.title}</h3>
							<p class="text-slate-500 text-sm mb-3">{cake.porce}</p>
							<p class="text-[#d4af37] font-black text-2xl">{cake.cena}</p>
						</div>
					</div>
				))}
			</div>
		</section>

		<section id="zakusky" class="py-16 px-4 bg-slate-50">
			<div class="max-w-7xl mx-auto">
				<h2 class="text-4xl font-serif text-center mb-12 italic">Naše Zákusky</h2>
				<div class="grid grid-cols-2 sm:grid-cols-3 md:grid-cols-4 lg:grid-cols-5 gap-4">
					{desserts.map(dessert => (
						<div class="bg-white rounded-2xl shadow-sm border border-slate-200 overflow-hidden group hover:-translate-y-1 transition-all">
							<div class="h-40 overflow-hidden">
								<img src={dessert.foto} alt={dessert.title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" loading="lazy" />
							</div>
							<div class="p-4 text-center">
								<h3 class="font-bold text-sm mb-1 h-10 flex items-center justify-center">{dessert.title}</h3>
								<p class="text-[#d4af37] font-bold">{dessert.cena}</p>
							</div>
						</div>
					))}
				</div>
			</div>
		</section>

		<section id="dort-na-prani" class="py-20 px-4 bg-white">
			<CustomCakeForm client:load />
		</section>

		<section id="prodejny" class="py-20 px-4 max-w-7xl mx-auto">
			<h2 class="text-4xl font-serif text-center mb-16 italic text-[#0a192f]">Naše Prodejny</h2>
			<div class="grid grid-cols-1 md:grid-cols-4 gap-8">
				{stores.map(store => (
					<div class="bg-[#0a192f] text-white p-8 rounded-[2.5rem] border border-[#d4af37]/30 shadow-2xl relative overflow-hidden group">
						<div class="absolute top-0 right-0 p-4 opacity-10 group-hover:scale-125 transition-transform duration-500">
							<svg xmlns="http://www.w3.org/2000/svg" width="48" height="48" viewBox="0 0 24 24" fill="currentColor"><path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"/></svg>
						</div>
						<h3 class="text-[#d4af37] font-bold mb-4 text-2xl">{store.name}</h3>
						<p class="text-sm opacity-80 mb-1 leading-relaxed">{store.address}</p>
						<p class="text-lg font-bold mb-6">{store.phone}</p>
						<div class="text-[11px] opacity-60 mb-8 uppercase tracking-[0.2em] font-bold">{store.hours}</div>
						<a href={store.mapUrl} target="_blank" class="inline-block w-full text-center py-3 rounded-full border border-[#d4af37] text-[#d4af37] hover:bg-[#d4af37] hover:text-[#0a192f] transition-all font-bold text-xs tracking-widest uppercase">Otevřít Mapu</a>
					</div>
				))}
			</div>
		</section>
	</main>

	<footer class="bg-[#0a192f] py-16 text-center text-white/40 text-xs border-t border-[#d4af37]/20">
		<div class="mb-4">
			<h2 class="text-[#d4af37] font-serif text-xl mb-2 italic">Cukrářství Blahutovi</h2>
			<p>Tradiční výroba od roku 1985</p>
		</div>
		<p>© {new Date().getFullYear()} Všechna práva vyhrazena.</p>
	</footer>
</Layout>
