---
import Layout from '../layouts/Layout.astro';
// OPRAVENO: Cesta do hlavního adresáře (o dvě úrovně výš)
import productsData from '../../data.json'; 

import CustomCakeForm from '../components/CustomCakeForm';
import ReservationForm from '../components/ReservationForm';
import { Branch } from '../types';

const cakes = (productsData?.cakes || []).sort((a, b) => (a.weight ?? 999) - (b.weight ?? 999));
const desserts = (productsData?.desserts || []).sort((a, b) => (a.weight ?? 999) - (b.weight ?? 999));
// ... zbytek kódu zůstává stejný

const stores = [
	{ id: 'petrvald', name: 'Petřvald', address: 'Šenovská 1', phone: '+420 778 157 857', mapUrl: 'https://www.google.com/maps/search/?api=1&query=Cukrářství+Blahutovi+Petřvald', hours: 'Út-Ne: 9:00 - 17:00' },
	{ id: 'pist', name: 'Píšť', address: 'Opavská 218/101', phone: '+420 602 323 788', mapUrl: 'https://www.google.com/maps/search/?api=1&query=Cukrářství+Blahutovi+Píšť', hours: 'Po-Pá: 6:00 - 15:00' },
	{ id: 'karvina', name: 'Karviná', address: 'tř. Těreškovové 2233/28', phone: '+420 778 157 867', mapUrl: 'https://www.google.com/maps/search/?api=1&query=Cukrářství+Blahutovi+Karviná', hours: 'Po-So: dle otevírací doby' },
	{ id: 'ostrava', name: 'Ostrava', address: 'Výškovická 116a', phone: '+420 775 271 101', mapUrl: 'https://www.google.com/maps/search/?api=1&query=Cukrářství+Blahutovi+Ostrava', hours: 'Po-So: dle otevírací doby' }
];
---

<Layout title="Cukrářství Blahutovi">
    <header class="bg-[#0a192f] text-white sticky top-0 z-50 border-b-2 border-[#d4af37]">
        <div class="max-w-7xl mx-auto px-4 h-20 flex justify-between items-center">
            <h1 class="text-2xl font-serif text-[#d4af37]">Cukrářství Blahutovi</h1>
            <nav class="hidden md:flex gap-8">
                <a href="/#dorty" class="hover:text-[#d4af37] transition-colors uppercase text-sm font-bold tracking-widest">Dorty</a>
                <a href="/#zakusky" class="hover:text-[#d4af37] transition-colors uppercase text-sm font-bold tracking-widest">Zákusky</a>
                <a href="/#dort-na-prani" class="hover:text-[#d4af37] transition-colors uppercase text-sm font-bold tracking-widest">Dort na přání</a>
                <a href="/#prodejny" class="hover:text-[#d4af37] transition-colors uppercase text-sm font-bold tracking-widest">Prodejny</a>
            </nav>
        </div>
    </header>

    <main>
        <section id="dorty" class="py-16 px-4 max-w-7xl mx-auto">
            <h2 class="text-4xl font-serif text-center mb-12">Naše Dorty</h2>
            <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
                {cakes.map(cake => (
                    <div class="bg-white rounded-3xl shadow-sm border border-slate-100 overflow-hidden group">
                        <div class="h-64 overflow-hidden">
                            <img src={cake.foto} alt={cake.title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
                        </div>
                        <div class="p-6 text-center">
                            <h3 class="text-xl font-bold mb-2">{cake.title}</h3>
                            <p class="text-[#d4af37] font-bold text-lg">{cake.cena}</p>
                        </div>
                    </div>
                ))}
            </div>
        </section>

        <section id="dort-na-prani" class="py-16 bg-slate-50">
            <CustomCakeForm client:load />
        </section>

        <section id="prodejny" class="py-16 px-4 max-w-7xl mx-auto">
            <h2 class="text-4xl font-serif text-center mb-12">Kde nás najdete</h2>
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                {stores.map(store => (
                    <div class="bg-[#0a192f] text-white p-6 rounded-3xl border border-[#d4af37]/30">
                        <h3 class="text-[#d4af37] font-bold mb-2 text-xl">{store.name}</h3>
                        <p class="text-sm opacity-80 mb-1">{store.address}</p>
                        <p class="text-sm font-bold mb-4">{store.phone}</p>
                        <div class="text-[10px] opacity-60 mb-6 uppercase tracking-wider">{store.hours}</div>
                        <a href={store.mapUrl} target="_blank" class="text-[#d4af37] font-bold text-sm hover:underline tracking-widest">NAVIGOVAT →</a>
                    </div>
                ))}
            </div>
        </section>
    </main>

    <footer class="bg-[#0a192f] py-12 text-center text-white/30 text-xs border-t border-[#d4af37]/10">
        <p>© 2026 Cukrářství Blahutovi | Všechna práva vyhrazena</p>
    </footer>
</Layout>
