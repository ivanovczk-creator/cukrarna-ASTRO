---
interface Props {
	title?: string;
	description?: string;
	keywords?: string;
}

const {
	title = 'Cukrářství Blahutovi - Tradiční pečivo a dorty',
	description = 'Rodinné cukrářství s tradicí od roku 1985.',
	keywords = 'cukrářství, dorty, zákusky'
} = Astro.props;
---

<!doctype html>
<html lang="cs">
	<head>
		<meta charset="UTF-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1.0" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />

		<title>{title}</title>
		<meta name="description" content={description} />
		<meta name="keywords" content={keywords} />

		<script async src="https://www.googletagmanager.com/gtag/js?id=G-5JPLYYKGGN"></script>
		<script is:inline>
			window.dataLayer = window.dataLayer || [];
			function gtag(){dataLayer.push(arguments);}
			gtag('js', new Date());
			gtag('config', 'G-5JPLYYKGGN');
		</script>
		
		<link rel="preconnect" href="https://fonts.googleapis.com">
		<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
		<link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;700&family=Inter:wght@300;400;600&display=swap" rel="stylesheet">
		
		<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/glightbox/dist/css/glightbox.min.css" />
	</head>
	<body class="bg-[#f8f9fa] text-[#0a192f]">
		<slot />

		<script is:inline src="https://cdn.jsdelivr.net/npm/glightbox/dist/js/glightbox.min.js"></script>
		<script is:inline>
			function initLightbox() {
				if (window.GLightbox) {
					GLightbox({ selector: '.glightbox', touchNavigation: true, loop: true });
				}
			}

			function initMobileMenu() {
				const menuToggle = document.getElementById('menu-toggle');
				const nav = document.querySelector('nav');
				
				if (menuToggle && nav) {
					// Nastavení výchozích ARIA stavů pro roboty
					menuToggle.setAttribute('aria-expanded', 'false');
					menuToggle.setAttribute('aria-controls', 'main-nav');
					nav.setAttribute('id', 'main-nav');

					menuToggle.onclick = () => {
						const isExpanded = menuToggle.getAttribute('aria-expanded') === 'true';
						
						// Přepnutí stavů
						menuToggle.setAttribute('aria-expanded', !isExpanded);
						nav.classList.toggle('hidden');
						nav.classList.toggle('flex');
						
						// Přidání/odebrání mobilních tříd
						nav.classList.toggle('absolute');
						nav.classList.toggle('top-20');
						nav.classList.toggle('left-0');
						nav.classList.toggle('w-full');
						nav.classList.toggle('bg-[#0a192f]');
						nav.classList.toggle('flex-col');
						nav.classList.toggle('p-6');
						nav.classList.toggle('z-50');
					};

					// Zavřít menu po kliknutí na odkaz (pro plynulý scroll)
					const navLinks = nav.querySelectorAll('a');
					navLinks.forEach(link => {
						link.onclick = () => {
							if (!nav.classList.contains('hidden')) {
								nav.classList.add('hidden');
								nav.classList.remove('flex', 'absolute', 'top-20', 'left-0', 'w-full', 'bg-[#0a192f]', 'flex-col', 'p-6', 'z-50');
								menuToggle.setAttribute('aria-expanded', 'false');
							}
						};
					});
				}
			}

			initLightbox();
			initMobileMenu();
			
			document.addEventListener('astro:after-swap', () => {
				initLightbox();
				initMobileMenu();
			});
		</script>
	</body>
</html>

<style is:global>
	:root {
		--navy-900: #0a192f;
		--navy-800: #112240;
		--gold-500: #d4af37;
		--gold-400: #f1c40f;
		--cream: #fffdfa;
		--offwhite: #f8f9fa;
	}

	html {
		scroll-behavior: smooth;
		scroll-padding-top: 80px;
	}

	body {
		font-family: 'Inter', sans-serif;
		margin: 0;
		overflow-x: hidden;
	}

	h1, h2, h3, h4 { font-family: 'Playfair Display', serif; }

	.glightbox-container { z-index: 9999 !important; }

	.bg-navy-900 { background-color: var(--navy-900) !important; }
	.text-navy-900 { color: var(--navy-900) !important; }
	.text-gold-500 { color: var(--gold-500) !important; }

	/* Pěkný scrollbar */
	::-webkit-scrollbar { width: 10px; }
	::-webkit-scrollbar-track { background: #f1f1f1; }
	::-webkit-scrollbar-thumb { background: #0a192f; border-radius: 5px; }
	::-webkit-scrollbar-thumb:hover { background: #d4af37; }
</style>
